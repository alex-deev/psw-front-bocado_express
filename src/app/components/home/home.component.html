<div class="mt-4">
  <div class="container">
    <h1>Detalle del pedido</h1>
    <div class="table-responsive mt-5">
      <table class="table table-secondary align-middle">
        <thead>
          <tr>
            <th class="col-1" scope="col">#</th>
            <th class="col-5" scope="col">Producto elegido</th>
            <th class="col-2" scope="col">Cantidad</th>
            <th class="col-2" scope="col">Precio</th>
            <th class="col-2" scope="col">SubTotal</th>
          </tr>
        </thead>
        <tbody>
          @for (producto of productosCarrito; track $index) {
            <tr>
              <td class="align-middle" scope="row">{{ $index + 1 }}</td>
              <td class="align-middle">
                <div class="row row-cols-2 align-items-center">
                  <div class="col-4 col-md-3 pe-0"><img [src]="producto.imagen" class="img-fluid rounded-4"></div>
                  <div class="col-8 col-md-9">
                    <span class="fw-semibold">{{ producto.nombre }}</span>
                    <p class="lh-1"><small>{{ producto.descripcion }}</small></p>
                  </div>
                </div>
              </td>
              <td class="align-middle pe-4">
                <input class="form-control" type="number" name="cantidad" min="1" [defaultValue]="1" [(ngModel)]="producto.cantidad">
              </td>
              <td class="align-middle">$ {{ producto.precio * 1 }}</td>
              <td class="align-middle">$ {{ producto.precio * producto.cantidad }} </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="6" class=" p-4">
                <div class="row row-col2 align-items-center mb-3">
                  <div class="col-1 align-self-end"><i class="fa-solid fa-cart-plus fa-fade fs-1"></i></div>
                  <span class="col-11 fs-2">¡Carrito vacio!</span>
                </div>
                <span class="fs-5">Prueba añadiendo algún producto...</span>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <form ngNativeValidate (submit)="hacerPedido()" id="form-parent">
    <div class="container card bg-secondary-subtle rounded-4 shadow p-4 mt-5 mb-5" id="pedido-form">
      <div class="row">
        <div class="col-12 col-md-8">
          <div class="row row-cols-2 gy-2">
            <label class="col-5 col-lg-4" for="nombreCliente">Nombre Completo</label>
            <div class="col-7 col-lg-8"><input class="form-control" type="text" name="nombreCliente" id="nombreCliente" placeholder="Ingrese su nombre" [(ngModel)]="nuevoPedido.nombreCliente" [required]="true"></div>
            
            <label class="col-5 col-lg-4" for="observacion">Observaciones</label>
            <div class="col-7 col-lg-8"><input class="form-control" type="text" name="observacion" id="observacion" placeholder="Ingrese sus preferencias" [(ngModel)]="nuevoPedido.observacion" [required]="true"></div>
            
            <label class="col-5 col-lg-4" for="telefono">Núm. de Teléfono</label>
            <div class="col-7 col-lg-8"><input class="form-control" type="number" name="telefono" id="telefono" placeholder="Ingrese su teléfono" [(ngModel)]="nuevoPedido.telefono" [required]="true"></div>
            
            <label class="col-5 col-lg-4" for="direccionEnvio">Dirección de Envío</label>
            <div class="col-7 col-lg-8"><input class="form-control" type="text" name="direccionEnvio" id="direccionEnvio" placeholder="Donde vive?" [(ngModel)]="nuevoPedido.direccionEnvio" [required]="true"></div>

            <label class="col-5 col-lg-4" for="tipoEntrega">Tipo de Entrega</label>
            <div class="col-7 col-lg-8">
              <select class="form-control" name="tipoEntrega" id="tipoEntrega" [(ngModel)]="nuevoPedido.tipoEntrega" [required]="true">
                <option value="0" disabled>Elija el tipo de entrega...</option>
                <option value="Delivery">Delivery</option>
                <option value="Retiro en Local">Retiro en Local</option>
              </select>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-4 text-center align-self-center">
          <hr>
          <h3>Total a pagar:</h3>
          <h2>$ {{ obtenerTotalPedido() }}</h2>
          <div class="row justify-content-center g-2 mt-2">
            <button type="reset" class="col-auto btn btn-lg btn-outline-dark rounded-pill" (click)="vaciarCarrito()">Limpiar</button>
            <button type="submit" class="col-auto btn btn-lg btn-dark rounded-pill ms-2">Hacer Pedido<i class="fa-solid fa-angle-right fa-fade ms-2" style="color: #f5f5f5;"></i></button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
